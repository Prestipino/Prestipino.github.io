<nav class="toc-nav">
  <ul class="toc-list">
    {% comment %} GENERIC TOC - extracts ANY h2/h3 headings {% endcomment %}
    
    <!-- Check for ANY h2 headings -->
    {% assign h2_sections = content | split: '<h2' %}
    
    {% for section in h2_sections %}
      {% if section contains 'id=' %}
        {% comment %} Get the ID {% endcomment %}
        {% assign id_part = section | split: 'id="' | last %}
        {% assign heading_id = id_part | split: '"' | first %}
        
        {% comment %} Get the title (text between > and </h2) {% endcomment %}
        {% assign after_arrow = section | split: '>' %}
        {% if after_arrow.size > 1 %}
          {% assign possible_title = after_arrow | last %}
          {% assign title_parts = possible_title | split: '</h2' %}
          {% if title_parts.size > 0 %}
            {% assign heading_title = title_parts[0] | strip_html | strip %}
            
            {% if heading_title.size > 0 %}
              <li class="toc-h2">
                <a href="#{{ heading_id }}">{{ heading_title }}</a>
              </li>
            {% endif %}
          {% endif %}
        {% endif %}
      {% endif %}
    {% endfor %}
    
    <!-- Check for ANY h3 headings -->
    {% assign h3_sections = content | split: '<h3' %}
    
    {% for section in h3_sections %}
      {% if section contains 'id=' %}
        {% comment %} Get the ID {% endcomment %}
        {% assign id_part = section | split: 'id="' | last %}
        {% assign heading_id = id_part | split: '"' | first %}
        
        {% comment %} Get the title (text between > and </h3) {% endcomment %}
        {% assign after_arrow = section | split: '>' %}
        {% if after_arrow.size > 1 %}
          {% assign possible_title = after_arrow | last %}
          {% assign title_parts = possible_title | split: '</h3' %}
          {% if title_parts.size > 0 %}
            {% assign heading_title = title_parts[0] | strip_html | strip %}
            
            {% if heading_title.size > 0 %}
              <li class="toc-h3">
                <a href="#{{ heading_id }}">{{ heading_title }}</a>
              </li>
            {% endif %}
          {% endif %}
        {% endif %}
      {% endif %}
    {% endfor %}
  </ul>
  
  {% comment %} Simple debug - shows if any headings were found {% endcomment %}
  {% if h2_sections.size > 1 or h3_sections.size > 1 %}
  <!-- Headings found -->
  {% else %}
  <div style="color: #666; font-style: italic; padding: 10px;">
    No headings found in this page.
  </div>
  {% endif %}
</nav>
