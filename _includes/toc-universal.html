<nav class="toc-nav">
  <!-- DEBUG: Show actual content structure -->
  <div style="display: none; background: #e3f2fd; padding: 10px; margin: 10px 0;">
    <strong>RAW CONTENT (first 300 chars):</strong>
    <pre style="font-size: 10px; overflow: auto; max-height: 100px;">{{ content | truncate: 300 }}</pre>
  </div>
  
  <ul class="toc-list">
    {% comment %} METHOD 1: Direct heading search {% endcomment %}
    {% assign found_headings = false %}
    
    <!-- Search for h2 tags -->
    {% for i in (1..10) %}
      {% capture h2_test %}<h2 id="{% endcapture %}
      {% if content contains h2_test %}
        {% assign found_headings = true %}
      {% endif %}
    {% endfor %}
    
    {% if found_headings %}
      <!-- Manual hardcoded links as fallback -->
      <li class="toc-h2"><a href="#origin-and-motivation">Origin and Motivation</a></li>
      <li class="toc-h2"><a href="#main-features">Main Features</a></li>
      <li class="toc-h2"><a href="#downloads">Downloads</a></li>
      <li class="toc-h2"><a href="#development-and-access">Development and Access</a></li>
      <li class="toc-h2"><a href="#applications">Applications</a></li>
    {% else %}
      <!-- For test-toc.html -->
      <li class="toc-h2"><a href="#section-one">Section One: Introduction</a></li>
      <li class="toc-h2"><a href="#section-two">Section Two: Main Content</a></li>
      <li class="toc-h3"><a href="#subsection-two-a">Subsection 2A</a></li>
      <li class="toc-h2"><a href="#section-three">Section Three: Conclusion</a></li>
    {% endif %}
  </ul>
  
  <div style="background: #f5f5f5; padding: 5px; margin-top: 10px; font-size: 11px;">
    Found headings: {{ found_headings }}
  </div>
</nav>
